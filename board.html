<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kanban Board</title>

    <link
      rel="shortcut icon"
      href="./assets/img/favicon-bright.png"
      type="image/x-icon"
    />

    <link rel="stylesheet" href="./styles/style.css" />
    <link rel="stylesheet" href="./styles/board.css" />
    <link rel="stylesheet" href="./styles/color-template.css" />
    <link rel="stylesheet" href="./styles/header.css" />
    <link rel="stylesheet" href="./styles/main.css" />

    <!-- Firebase SDK für die App und die Realtime Database -->
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script>
    <script src="./script/firebase-config.js"></script>
    <script src="./script/board.js"></script>
  </head>
  <body class="body">
    <!-- Seitenleiste mit Logo -->
    <nav class="sidebar">
      <div class="logo-container static">
        <img src="./assets/img/logo-2.png" alt="Logo" class="logo" />
      </div>
      <ul>
        <li>
          <a href="./summary.html"
            ><img src="./assets/icons/summary.png" alt="" />Summary</a
          >
        </li>
        <li>
          <a href="#"
            ><img src="./assets/icons/add_task.png" alt="" />Add Task</a
          >
        </li>
        <li>
          <a href="./board.html" class="active"
            ><img src="./assets/icons/board.png" alt="" />Board</a
          >
        </li>
        <li>
          <a href="./contacts.html"
            ><img src="./assets/icons/contacts.png" alt="" />Contacts</a
          >
        </li>
      </ul>
      <footer>
        <a href="#">Privacy Policy</a>
        <a href="#">Legal Notice</a>
      </footer>
    </nav>

    <aside>
      <!-- Header -->
      <header>
        <div>
          <span>Kanban Project Managment Tool</span>
        </div>
        <div>
          <div>
            <img src="./assets/img/help.png" alt="./assets/img/help.png" />
          </div>
          <div id="userProfil">
            <span>SM</span>
            <!-- Das hier wird Js benötigen um Anfangsbuchstaben vom Vornamen und Nachnamen reinzugeben-->
          </div>
        </div>
      </header>

      <!-- Hauptinhalt -->
      <main>
        <div class="search-bar">
          <h1 class="contentH1">Board</h1>
          <div class="right-section">
            <div class="input-container">
              <input type="text" id="searchInput" placeholder="   Find Task" />
            </div>
            <button id="addTaskButton">Add task +</button>
          </div>
        </div>

        <div class="headlines">
          <div class="card">
            <h2>To do</h2>
            <button class="add-task-btn-category" data-category="todo">
              +
            </button>
          </div>
          <div class="card">
            <h2>In progress</h2>
            <button class="add-task-btn-category" data-category="in-progress">
              +
            </button>
          </div>
          <div class="card">
            <h2>Await feedback</h2>
            <button
              class="add-task-btn-category"
              data-category="await-feedback"
            >
              +
            </button>
          </div>
          <div class="card">
            <h2>Done</h2>
          </div>
        </div>

        <div class="board-container">
          <!-- To do column -->
          <div class="board-column" data-status="todo">
            <div class="no-tasks">No tasks To do</div>
            <div class="tasks-container"></div>
          </div>

          <!-- In progress column -->
          <div class="board-column" data-status="in-progress">
            <div class="no-tasks">No tasks In progress</div>
            <div class="tasks-container">
              <div
                class="task-card user-story"
                data-id="task1"
                data-category="in-progress"
                data-title="Kochwelt Page &amp; Recipe Recommender"
                data-description="Build start page with recipe recommendation..."
                data-due-date="2023-10-20"
                data-priority="Medium"
                data-assigned-to="AM,EM,MB"
                data-subtasks="Implement UI,Connect API"
                data-type="User Story"
                data-completed-subtasks="1"
              >
                <div class="tag">User Story</div>
                <h3>Kochwelt Page &amp; Recipe Recommender</h3>
                <p>Build start page with recipe recommendation...</p>
                <div class="progress">
                  <div class="progress-bar" style="width: 50%"></div>
                  <span>1/2 Subtasks</span>
                </div>
                <div class="avatars">
                  <div class="avatar" style="background-color: #ff8a65">AM</div>
                  <div class="avatar" style="background-color: #4db6ac">EM</div>
                  <div class="avatar" style="background-color: #9575cd">MB</div>
                </div>
                <div class="icon menu-icon">&#9776;</div>
              </div>
            </div>
          </div>

          <!-- Await feedback column -->
          <div class="board-column" data-status="await-feedback">
            <div class="no-tasks">No tasks Await Feedback</div>
            <div class="tasks-container">
              <div
                class="task-card technical-task"
                data-id="task2"
                data-category="await-feedback"
                data-title="HTML Base Template Creation"
                data-description="Create reusable HTML base templates..."
                data-due-date="2023-10-22"
                data-priority="High"
                data-assigned-to="DE,BZ,AS"
                data-subtasks="Setup project,Define templates"
                data-type="Technical Task"
                data-completed-subtasks="0"
              >
                <div class="tag">Technical Task</div>
                <h3>HTML Base Template Creation</h3>
                <p>Create reusable HTML base templates...</p>
                <div class="avatars">
                  <div class="avatar" style="background-color: #f06292">DE</div>
                  <div class="avatar" style="background-color: #ba68c8">BZ</div>
                  <div class="avatar" style="background-color: #7986cb">AS</div>
                </div>
                <div class="icon arrow-icon">&#9660;</div>
              </div>

              <div
                class="task-card user-story"
                data-id="task3"
                data-category="await-feedback"
                data-title="Daily Kochwelt Recipe"
                data-description="Implement daily recipe and portion calculator..."
                data-due-date="2023-10-25"
                data-priority="Low"
                data-assigned-to="EF,AS,TW"
                data-subtasks="Design UI,Develop logic"
                data-type="User Story"
                data-completed-subtasks="0"
              >
                <div class="tag">User Story</div>
                <h3>Daily Kochwelt Recipe</h3>
                <p>Implement daily recipe and portion calculator...</p>
                <div class="avatars">
                  <div class="avatar" style="background-color: #ffb74d">EF</div>
                  <div class="avatar" style="background-color: #f06292">AS</div>
                  <div class="avatar" style="background-color: #ef5350">TW</div>
                </div>
                <div class="icon menu-icon">&#9776;</div>
              </div>
            </div>
          </div>

          <!-- Done column -->
          <div class="board-column" data-status="done">
            <div class="no-tasks">No tasks Done</div>
            <div class="tasks-container">
              <div
                class="task-card technical-task"
                data-id="task4"
                data-category="done"
                data-title="CSS Architecture Planning"
                data-description="Define CSS naming conventions and structure..."
                data-due-date="2023-10-30"
                data-priority="Medium"
                data-assigned-to="SM,BZ"
                data-subtasks="Research best practices,Document guidelines"
                data-type="Technical Task"
                data-completed-subtasks="2"
              >
                <div class="tag">Technical Task</div>
                <h3>CSS Architecture Planning</h3>
                <p>Define CSS naming conventions and structure...</p>
                <div class="progress">
                  <div class="progress-bar full"></div>
                  <span>2/2 Subtasks</span>
                </div>
                <div class="avatars">
                  <div class="avatar" style="background-color: #4dd0e1">SM</div>
                  <div class="avatar" style="background-color: #ba68c8">BZ</div>
                </div>
                <div class="icon arrow-icon">&#9650;</div>
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Modal für Task-Details -->
      <div class="modal" id="taskDetailsModal">
        <div class="modal-content-task">
          <span class="close-button">&times;</span>
          <div class="task-header">
            <div class="task-type" id="taskType"></div>
            <h2 id="taskDetailTitle"></h2>
          </div>
          <p id="taskDetailDescription"></p>
          <div class="task-info">
            <p>
              <strong>Due date:</strong> <span id="taskDetailDueDate"></span>
            </p>
            <p>
              <strong>Priority:</strong> <span id="taskDetailPriority"></span>
              <span class="priority-icon" id="taskDetailPriorityIcon"></span>
            </p>
            <p><strong>Assigned to:</strong></p>
            <ul id="taskAssignedTo" class="assigned-to-list"></ul>
          </div>
          <div class="subtasks">
            <h3>Subtasks</h3>
            <ul id="taskSubtasks"></ul>
          </div>
          <div class="task-actions">
            <button class="delete-btn">&#128465; Delete</button>
            <button class="edit-btn">&#9998; Edit</button>
          </div>
        </div>
      </div>

      <!-- Add Task Modal -->
      <div id="addTaskModal" class="modal">
        <div class="modal-content">
          <span class="close-button">&times;</span>
          <h2 class="contentH2">Add Task</h2>
          <form id="addTaskForm">
            <div class="form-container">
              <!-- Linke Spalte -->
              <div class="form-column">
                <label for="taskTitle">Title <span class="required">*</span></label>
                <input type="text" id="taskTitle" placeholder="Enter a title" required />
      
                <label for="taskDescription">Description</label>
                <textarea id="taskDescription" placeholder="Enter a Description" required></textarea>
      
                <label for="taskAssigned">Assigned to</label>
                <div id="taskAssignedContainer" class="assigned-container">
                <div id="taskAssignedDropdown" class="custom-dropdown">
                <div class="dropdown-placeholder">Select contacts
                    <div class="arrow">
                    <img id="dropdownArrow" class="dropdown-arrow" src="./assets/icons/arrow_drop_down.png" alt="Dropdown arrow" />
                </div>
                </div>
                <div id="taskAssignedOptions" class="dropdown-options hidden"></div>
                </div>
                </div>
                </div>
                <div class="add-task-label">
                <label for="required"
                ><span class="required">*</span>This field is required</label
              >
            </div>
              </div>

              <div class="divider"></div>

              <!-- Due Date -->
              <div class="form-column">
                <label for="taskDueDate"
                  >Due Date <span class="required">*</span></label
                >
                <input type="date" id="taskDueDate" required />
                <div id="dueDateError" class="error-message hidden">
                    This field is required
                  </div>

                   <!-- Priority -->
                <label for="taskPriority">Prio</label>
                <div class="priority">
                  <button
                    id="urgentBtn"
                    class="priority-btn"
                    data-priority="Urgent"
                    type="button"
                  >
                    <img
                      src="./assets/icons/urgent.png"
                      id="urgentIcon"
                      class="priority-icon"
                      alt="Urgent"
                    />
                    Urgent
                  </button>
                  <button
                    id="mediumBtn"
                    class="priority-btn"
                    data-priority="Medium"
                    type="button"
                  >
                    <img
                      src="./assets/icons/medium.png"
                      id="mediumIcon"
                      class="priority-icon"
                      alt="Medium"
                    />
                    Medium
                  </button>
                  <button
                    id="lowBtn"
                    class="priority-btn"
                    data-priority="Low"
                    type="button"
                  >
                    <img
                      src="./assets/icons/low.png"
                      id="lowIcon"
                      class="priority-icon"
                      alt="Low"
                    />
                    Low
                  </button>
                </div>

                <label for="taskCategory"
                  >Category <span class="required">*</span></label
                >
                <select id="taskCategory" required>
                  <option disabled>Select task category</option>
                  <option value="User Story">User Story</option>
                  <option value="Technical Task">Technical Task</option>
                </select>

                 <!-- Subtasks -->
                <label for="taskSubtasks">Subtasks</label>
<div id="subtaskSelectContainer" class="subtask-select-container">
  <button id="addSubtaskButton" class="add-subtask-button">+</button>
  <div id="subtaskOptions" class="subtask-options" style="display: none;">
    <select id="subtaskSelect">
      <option value="Contact Form">Contact Form</option>
      <option value="Write Legal Imprint">Write Legal Imprint</option>
    </select>
    <button id="confirmSubtask" class="confirm-subtask-button">✔️</button>
    <button id="cancelSubtask" class="cancel-subtask-button">❌</button>
  </div>
</div>
<div id="confirmedSubtasks" class="confirmed-subtasks"></div>

            <div class="form-actions">
              <!-- Actions -->
              <div class="addTask-buttons">
                <button class="cancel-btn" id="cancelButton">Cancel x</button>
                <button type="submit" class="create-task-btn">Create Task ✓</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </aside>
  </body>
</html>
